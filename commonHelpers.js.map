{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getDataFromServer(url, value, page) {\n  const responce = await axios.get(url, {\n    params: {\n      key: '42558235-d544995829d65acb68be95adf',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return responce.data;\n}\n","export const list = document.querySelector('.img-list');\n\nexport function addElement(array) {\n  const markup = array\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"image-item\">\n    <a href=\"${largeImageURL}\">\n                <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n                <div class=\"image-info\">\n                    <p class=\"info\"><b>Likes</b> ${likes}</p>\n                    <p class=\"info\"><b>Views</b> ${views}</p>\n                    <p class=\"info\"><b>Comments</b> ${comments}</p>\n                    <p class=\"info\"><b>Downloads</b> ${downloads}</p>\n                </div>\n            </a>\n    </li>`;\n      }\n    )\n    .join('');\n  return list.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getDataFromServer as getInfo } from './js/pixabay-api';\nimport { addElement, list } from './js/render-functions';\n\nlet page = 1;\nlet inputValue;\nlet totalHits;\n\nconst form = document.querySelector('.image-search-form');\nconst loaderItem = document.querySelector('.load-item');\nconst loadButton = document.querySelector('.load-button');\nconst endpoint = 'https://pixabay.com/api/';\n\nfunction smoothScroll() {\n  const listItem = document.querySelector('.img-list');\n  let sizeGallery = listItem.getBoundingClientRect();\n  if (sizeGallery.height > 0) {\n    let heightGallery = sizeGallery.height;\n    window.scrollBy({\n      top: heightGallery,\n      behavior: 'smooth',\n    });\n  }\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  list.innerHTML = null;\n  inputValue = event.currentTarget.input.value.trim();\n  if (inputValue === '') {\n    iziToast.show({\n      title: 'Error',\n      titleColor: '#ffffff',\n      message: 'Write key word to search images',\n      messageColor: '#ffffff',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      close: false,\n    });\n    return;\n  }\n  loaderItem.classList.add('loader');\n  loadButton.classList.remove('hide');\n  const array = await getInfo(endpoint, inputValue, page);\n  totalHits = array.totalHits;\n  if (array.hits.length === 0) {\n    loadButton.classList.add('hide');\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#ffffff',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n    });\n  }\n  loaderItem.classList.remove('loader');\n  addElement(array.hits);\n  const lightbox = new SimpleLightbox('.image-item a', {\n    animationSpeed: 300,\n    captionsData: 'alt',\n    captionDelay: 1000,\n    overlayOpacity: 0.5,\n  });\n  lightbox.refresh();\n\n  form.reset();\n});\n\nloadButton.addEventListener('click', async () => {\n  page++;\n  loaderItem.classList.add('loader');\n  const data = await getInfo(endpoint, inputValue, page);\n  loaderItem.classList.remove('loader');\n  addElement(data.hits);\n  smoothScroll();\n  const lightbox = new SimpleLightbox('.image-item a', {\n    animationSpeed: 300,\n    captionsData: 'alt',\n    captionDelay: 1000,\n    overlayOpacity: 0.5,\n  });\n  lightbox.refresh();\n  if ((page - 1) * 15 >= totalHits) {\n    loadButton.classList.add('hide');\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: 'blue',\n      messageColor: '#ffffff',\n      timeout: 1000,\n      position: 'bottomRight',\n      maxWidth: 420,\n    });\n  }\n});\n"],"names":["getDataFromServer","url","value","page","axios","list","addElement","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","inputValue","totalHits","form","loaderItem","loadButton","endpoint","smoothScroll","sizeGallery","heightGallery","event","iziToast","getInfo","SimpleLightbox","data"],"mappings":"owBAEO,eAAeA,EAAkBC,EAAKC,EAAOC,EAAM,CAYxD,OAXiB,MAAMC,EAAM,IAAIH,EAAK,CACpC,OAAQ,CACN,IAAK,qCACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GACe,IAClB,CCfO,MAAME,EAAO,SAAS,cAAc,WAAW,EAE/C,SAASC,EAAWC,EAAO,CAChC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,eACAN,CAAa;AAAA,0CACcC,CAAY,UAAUC,CAAI;AAAA;AAAA,mDAEjBC,CAAK;AAAA,mDACLC,CAAK;AAAA,sDACFC,CAAQ;AAAA,uDACPC,CAAS;AAAA;AAAA;AAAA,UAK3D,EACA,KAAK,EAAE,EACV,OAAOV,EAAK,mBAAmB,YAAaG,CAAM,CACpD,CCtBA,IAAIL,EAAO,EACPa,EACAC,EAEJ,MAAMC,EAAO,SAAS,cAAc,oBAAoB,EAClDC,EAAa,SAAS,cAAc,YAAY,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAW,2BAEjB,SAASC,GAAe,CAEtB,IAAIC,EADa,SAAS,cAAc,WAAW,EACxB,wBAC3B,GAAIA,EAAY,OAAS,EAAG,CAC1B,IAAIC,EAAgBD,EAAY,OAChC,OAAO,SAAS,CACd,IAAKC,EACL,SAAU,QAChB,CAAK,CACF,CACH,CAEAN,EAAK,iBAAiB,SAAU,MAAMO,GAAS,CAI7C,GAHAA,EAAM,eAAc,EACpBpB,EAAK,UAAY,KACjBW,EAAaS,EAAM,cAAc,MAAM,MAAM,KAAI,EAC7CT,IAAe,GAAI,CACrBU,EAAS,KAAK,CACZ,MAAO,QACP,WAAY,UACZ,QAAS,kCACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,MAAO,EACb,CAAK,EACD,MACD,CACDP,EAAW,UAAU,IAAI,QAAQ,EACjCC,EAAW,UAAU,OAAO,MAAM,EAClC,MAAMb,EAAQ,MAAMoB,EAAQN,EAAUL,EAAYb,CAAI,EACtDc,EAAYV,EAAM,UACdA,EAAM,KAAK,SAAW,IACxBa,EAAW,UAAU,IAAI,MAAM,EAC/BM,EAAS,KAAK,CACZ,QACE,2EACF,aAAc,UACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,GAEHP,EAAW,UAAU,OAAO,QAAQ,EACpCb,EAAWC,EAAM,IAAI,EACJ,IAAIqB,EAAe,gBAAiB,CACnD,eAAgB,IAChB,aAAc,MACd,aAAc,IACd,eAAgB,EACpB,CAAG,EACQ,QAAO,EAEhBV,EAAK,MAAK,CACZ,CAAC,EAEDE,EAAW,iBAAiB,QAAS,SAAY,CAC/CjB,IACAgB,EAAW,UAAU,IAAI,QAAQ,EACjC,MAAMU,EAAO,MAAMF,EAAQN,EAAUL,EAAYb,CAAI,EACrDgB,EAAW,UAAU,OAAO,QAAQ,EACpCb,EAAWuB,EAAK,IAAI,EACpBP,IACiB,IAAIM,EAAe,gBAAiB,CACnD,eAAgB,IAChB,aAAc,MACd,aAAc,IACd,eAAgB,EACpB,CAAG,EACQ,QAAO,GACXzB,EAAO,GAAK,IAAMc,IACrBG,EAAW,UAAU,IAAI,MAAM,EAC/BM,EAAS,KAAK,CACZ,QAAS,6DACT,gBAAiB,OACjB,aAAc,UACd,QAAS,IACT,SAAU,cACV,SAAU,GAChB,CAAK,EAEL,CAAC"}